onPrimaryKeyToggle: function (oEvent) {
  const isOn = oEvent.getParameter("state"); // âœ… FIX
  this._bPKToggleOn = isOn;

  var aItems = this.byId("columnsTable").getItems();
  aItems.forEach(item => {
    var cb = item.getCells()[0]; // PK checkbox
    cb.setVisible(isOn);
    if (!isOn) {
      cb.setSelected(false); // clear selection
      item.removeStyleClass("pkSelectedRow"); // clear highlight
    }
  });
},

// checkbox select
onCheckboxSelect: function (oEvent) {
  var selectedCB = oEvent.getSource();
  var row = selectedCB.getParent();

  if (selectedCB.getSelected()) {
    row.addStyleClass("pkSelectedRow");
  } else {
    row.removeStyleClass("pkSelectedRow");
  }
},
