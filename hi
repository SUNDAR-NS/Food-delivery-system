_freezeTable: function () {

  // ðŸ”¹ Existing code (unchanged)
  let aItems = this.byId("columnsTable").getItems();
  var aColumns = this.getView().getModel("columnsModel").getData();
  console.log(aColumns);

  aItems.forEach(item => {
    item.getCells()[0].setEditable(false); // colName Input
    item.getCells()[1].setEnabled(false);  // dataType Select
    item.getCells()[2].setEnabled(false);  // constraint Select
    item.getCells()[3].setEnabled(false);  // delete btn
    item.getCells()[4].setEnabled(false);  // delete btn
    item.getCells()[5].setEnabled(false);  // delete btn
  });

  this.byId("columnsTable").setMode("None");
  this.byId("columnsTable").rerender();

  // Disable Add Row
  this.byId("_IDGenButton5").setEnabled(false);
  this.byId("_IDGenButton54").setEnabled(false);
  this.byId("_IDGenButton59").setEnabled(false);

  var oWizard = this.byId("step3");

  // ðŸ”¹ NEW: keep reference to table items (for PK checkbox state)
  var aTableItems = this.byId("columnsTable").getItems();

  const oSummaryTable = new sap.m.Table({
    inset: false,
    columns: [
      new sap.m.Column({ header: new sap.m.Label({ text: "Column Name" }) }),
      new sap.m.Column({ header: new sap.m.Label({ text: "Data Type" }) }),
      new sap.m.Column({ header: new sap.m.Label({ text: "Constraint" }) }),
      new sap.m.Column({ header: new sap.m.Label({ text: "Primary Key" }) }) // ðŸ”¹ NEW
    ],

    // ðŸ”¹ KEEP YOUR EXISTING MAP (UNCHANGED)
    items: aColumns.columns.map((col, index) => {

      // ðŸ”¹ NEW: read checkbox state safely (PK is optional)
      var bIsPrimaryKey = false;
      var oRowItem = aTableItems[index];
      if (oRowItem) {
        var oCheckBox = oRowItem.getCells()[0]; // PK checkbox
        if (oCheckBox && oCheckBox.getVisible()) {
          bIsPrimaryKey = oCheckBox.getSelected();
        }
      }

      // ðŸ”¹ YOUR EXISTING LOGIC (UNCHANGED)
      let displayType = col.DATATYPE;

      if (col.DATATYPE === "NVARCHAR") {
        if (col.LENGTH_PRECISION == undefined) {
          col.LENGTH_PRECISION = 1;
        }
        if (col.LENGTH_PRECISION >= 10000) {
          col.LENGTH_PRECISION = 10000;
        }
        displayType += col.LENGTH_PRECISION ? `(${col.LENGTH_PRECISION})` : "";
      } 
      else if (col.DATATYPE === "DECIMAL") {
        if (col.LENGTH_PRECISION == undefined) {
          col.LENGTH_PRECISION = 1;
        }
        if (col.SCALE == undefined) {
          col.SCALE = 0;
        }
        if (col.LENGTH_PRECISION >= 1000) {
          col.LENGTH_PRECISION = 1000;
        }
        if (col.SCALE >= 38) {
          col.SCALE = 38;
        }

        displayType += col.LENGTH_PRECISION
          ? `(${col.LENGTH_PRECISION}${col.SCALE !== undefined ? "," + col.SCALE : ""})`
          : "";
      }

      // ðŸ”¹ ADD PK INFO TO SUMMARY ROW
      return new sap.m.ColumnListItem({
        cells: [
          new sap.m.Text({ text: col.COLUMN_NAME }),
          new sap.m.Text({ text: displayType }),
          new sap.m.Text({ text: col.CONSTRAINTS }),
          new sap.m.Text({ text: bIsPrimaryKey ? "Yes" : "No" }) // ðŸ”¹ NEW
        ]
      });
    })
  });

  const oGlobalSubmitButton = new sap.m.Button({
    text: "Submit",
    type: "Ghost",
    press: this.openTempateDashboard.bind(this, oSummaryTable),
    layoutData: new sap.m.FlexItemData({ styleClass: "sapUiSmallMarginTop" })
  });

  const oSummaryLayout = new sap.m.VBox({
    items: [
      oSummaryTable,
      oGlobalSubmitButton
    ],
    width: "100%"
  });

  const oStep3 = this.byId("step3");
  oStep3.removeAllContent();
  oStep3.addContent(oSummaryLayout);
},
