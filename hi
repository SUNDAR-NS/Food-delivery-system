if (message1 === "All datatypes and constraints are valid") {

  // generate UUID for dummy table
  const dummyId = cds.utils.uuid();

  // insert JSON into Dummy table
  await tx.run(
    INSERT.into("COM_SCB_FILEUPLOAD_MASTER_DUMMY").entries({
      ID: dummyId,
      JSON_DATA: JSON.stringify(jsonData)
    })
  );

  // call HANA procedure for duplicate validation
  const procResult = await tx.run(`
    CALL GENERIC_DATA_VALIDATOR(
      '${dummyId}',
      '${MODULE_NAME}',
      '${SUB_MODULE_NAME}',
      '${LOAD_TEMPLATE}',
      ?,
      ?
    )
  `);

  const procOut = procResult[0];
  const status = procOut.O_STATUS;
  const message = procOut.O_MESSAGE;

  // if duplicate found
  if (status === 'E') {

    // cleanup dummy data
    await tx.run(
      DELETE.from("COM_SCB_FILEUPLOAD_MASTER_DUMMY").where({ ID: dummyId })
    );

    return {
      message: message,
      flag: false
    };
  }

  // no duplicates â†’ proceed
  return {
    message: "Proceed",
    flag: true
  };

} else {
  return {
    message: message1,
    flag: false
  };
}
