onNextSummary: function () {

      var oModel = this.getView().getModel("columnsModel");

      let aData = oModel.getProperty("/columns");

      console.log(aData)
      // Validation
      for (let row of aData) {
        if (!row.COLUMN_NAME || !row.DATATYPE || !row.CONSTRAINTS) {

          sap.m.MessageToast.show("Please fill all required inputs.");
          return;
        }
      }

      // ===== Validation STEP-2 : Primary Key selection =====

      if (this._bPKToggleOn) {
        var bAnyPKSelected = false;
        var oTable = this.byId("columnsTable");
        var aItems = oTable.getItems();

        aItems.forEach(function (oItem) {
          var oCheckBox = oItem.getCells()[0]; // PK checkbox is first cell
          if (oCheckBox.getVisible() && oCheckBox.getSelected()) {
            bAnyPKSelected = true;
          }
        });

        if (!bAnyPKSelected) {
          sap.m.MessageToast.show("Please select at least one Primary Key column.");
          return;
        }
      }

      //write code for validation step-2
      // Freeze table (make inputs readonly + disable add/delete)
      this._freezeTable();

      // Move to next step
      this.byId("_IDGenButtons").setVisible(false);
      this.byId("templateWizard").nextStep();
    },

    _freezeTable: function () {

      // ðŸ”¹ Existing code (unchanged)
      let aItems = this.byId("columnsTable").getItems();
      var aColumns = this.getView().getModel("columnsModel").getData();
      console.log(aColumns);

      aItems.forEach(item => {
        item.getCells()[0].setEditable(false); // colName Input
        item.getCells()[1].setEnabled(false);  // dataType Select
        item.getCells()[2].setEnabled(false);  // constraint Select
        item.getCells()[3].setEnabled(false);  // delete btn
        item.getCells()[4].setEnabled(false);  // delete btn
        item.getCells()[5].setEnabled(false);  // delete btn
      });

      this.byId("columnsTable").setMode("None");
      this.byId("columnsTable").rerender();

      // Disable Add Row
      this.byId("_IDGenButton5").setEnabled(false);
      this.byId("_IDGenButton54").setEnabled(false);
      this.byId("_IDGenButton59").setEnabled(false);

      var oWizard = this.byId("step3");

      // ðŸ”¹ NEW: keep reference to table items (for PK checkbox state)
      var aTableItems = this.byId("columnsTable").getItems();

      const oSummaryTable = new sap.m.Table({
        inset: false,
        columns: [
          new sap.m.Column({ header: new sap.m.Label({ text: "Column Name" }) }),
          new sap.m.Column({ header: new sap.m.Label({ text: "Data Type" }) }),
          new sap.m.Column({ header: new sap.m.Label({ text: "Constraint" }) }),
          new sap.m.Column({ header: new sap.m.Label({ text: "Unique" }) })
        ],

        // ðŸ”¹ KEEP YOUR EXISTING MAP (UNCHANGED)
        items: aColumns.columns.map((col, index) => {

          // ðŸ”¹ NEW: read checkbox state safely (PK is optional)
          var bIsPrimaryKey = false;
          var oRowItem = aTableItems[index];
          if (oRowItem) {
            var oCheckBox = oRowItem.getCells()[0]; // PK checkbox
            if (oCheckBox && oCheckBox.getVisible()) {
              bIsPrimaryKey = oCheckBox.getSelected();
            }
          }

          // ðŸ”¹ YOUR EXISTING LOGIC (UNCHANGED)
          let displayType = col.DATATYPE;

          if (col.DATATYPE === "NVARCHAR") {
            if (col.LENGTH_PRECISION == undefined) {
              col.LENGTH_PRECISION = 1;
            }
            if (col.LENGTH_PRECISION >= 10000) {
              col.LENGTH_PRECISION = 10000;
            }
            displayType += col.LENGTH_PRECISION ? `(${col.LENGTH_PRECISION})` : "";
          }
          else if (col.DATATYPE === "DECIMAL") {
            if (col.LENGTH_PRECISION == undefined) {
              col.LENGTH_PRECISION = 1;
            }
            if (col.SCALE == undefined) {
              col.SCALE = 0;
            }
            if (col.LENGTH_PRECISION >= 1000) {
              col.LENGTH_PRECISION = 1000;
            }
            if (col.SCALE >= 38) {
              col.SCALE = 38;
            }

            displayType += col.LENGTH_PRECISION
              ? `(${col.LENGTH_PRECISION}${col.SCALE !== undefined ? "," + col.SCALE : ""})`
              : "";
          }

          // ðŸ”¹ ADD PK INFO TO SUMMARY ROW
          return new sap.m.ColumnListItem({
            cells: [
              new sap.m.Text({ text: col.COLUMN_NAME }),
              new sap.m.Text({ text: displayType }),
              new sap.m.Text({ text: col.CONSTRAINTS }),
              new sap.m.Icon({ src: bIsPrimaryKey ? "sap-icon://accept" : "sap-icon://decline",
                tooltip: bIsPrimaryKey ? "Primary Key" : "Not a Primary Key"
               })
            ]
          });
        })
      });

      const oGlobalSubmitButton = new sap.m.Button({
        text: "Submit",
        type: "Ghost",
        press: this.openTempateDashboard.bind(this, oSummaryTable),
        layoutData: new sap.m.FlexItemData({ styleClass: "sapUiSmallMarginTop" })
      });

      const oSummaryLayout = new sap.m.VBox({
        items: [
          oSummaryTable,
          oGlobalSubmitButton
        ],
        width: "100%"
      });

      const oStep3 = this.byId("step3");
      oStep3.removeAllContent();
      oStep3.addContent(oSummaryLayout);
    },


    openTempateDashboard: async function (oTable) {

      var aItems = oTable.getItems();
      var aData = [];

      aItems.forEach(function (oItem) {
        var aCells = oItem.getCells();

        // Example: assume table columns are (ColumnName, DataType, Constraints)
        // console.log(aCells[1].getText)
        var bIsPrimaryKey = false;
        if (aCells[3] && aCells[3].getText) {
          bIsPrimaryKey = aCells[3].getText() === "Yes";
        }
        var rowData = {
          COLUMN_NAME: aCells[0].getText ? aCells[0].getText() : aCells[0].getValue(), // Text or Input
          DATA_TYPE: aCells[1].getText ? aCells[1].getText() : aCells[1].getValue(),
          CONSTRAINTS: aCells[2].getText ? aCells[2].getText() : aCells[2].getValue(),
          IS_UNIQUE: bIsPrimaryKey
        };

        aData.push(rowData);
      });

      console.log("Extracted JSON:", aData);

      //save this to a template dashboard.

      var aFieldIds = ["moduleComboBox1", "submoduleInput", "templateNameInput", "datePickerId"];

      const module = this.byId("moduleComboBox1").getSelectedKey();
      const submodule = this.byId("submoduleInput").getValue();
      const templateName = this.byId("templateNameInput").getValue();
      var oExpiryDate = this.byId("datePickerId").getValue();

      const payload = {
        MODULE_NAME: module,
        SUB_MODULE_NAME: submodule,
        LOAD_TEMPLATE: templateName,
        STATUS: "pending",
        EXPIRY_DATE: oExpiryDate,
        JSON_TEMPLATE: JSON.stringify(aData)
      };

      const listBinding = this.oModel.bindList("/TemplateStorage");
      const context = await listBinding.create(payload);
      await context.created();

      //refresh browser screen
      location.reload();

    },


Dont change any logic my tl asked me to change the primary key name to unique , and check this code also if it has any error and and give me the full code.
